import{r as a,N as z,b as E,c as D,j as t,a as b,u as L}from"./index-CX5K6pd5.js";import{P as O,L as T,z as u,y as v,l as j}from"./index-CQjGLbhw.js";const B=u.object({title:u.string().min(1,"Title required"),details:u.string().min(3,"Must be 3 characters long")}),U=()=>{const[n,i]=a.useState(""),[l,c]=a.useState(""),[r,m]=a.useState({}),[d,p]=a.useState(!1),[H,N]=a.useContext(z),g=E(),y=D(),C=e=>v.success(e,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:j},setTimeout(function(){y("/")},2500)),w=e=>v.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",transition:j}),S=async()=>{const e=await b.get(`/read/${g._id}`);i(e.data.title),c(e.data.details)};a.useEffect(()=>{S()},[]);const k=async e=>{var h,x;e.preventDefault();const f=B.safeParse({title:n,details:l});if(!f.success){const s=f.error.flatten().fieldErrors;m({title:(h=s.title)==null?void 0:h[0],details:(x=s.details)==null?void 0:x[0]});return}p(!0);const P={title:n,details:l};try{const{getnote:s}=L(N),o=await b.put(`/edit/${g._id}`,P);if(s(),!o)return;o.data.success||w(o.data.message),C(o.data.message)}catch(s){console.log(s)}i(""),c(""),m({}),p(!1)};return t.jsxs("div",{onSubmit:k,className:"form p-10 text-white",children:[t.jsxs("form",{className:"w-90 max-w-100",children:[r.title===""?"":t.jsx("p",{className:"text-red-500",children:r.title}),t.jsx("input",{onChange:e=>i(e.target.value),value:n,className:"block w-full h-15 px-5 py-3 bg-zinc-800 outline-none rounded-md",type:"text",name:"filename",placeholder:"title goes here..."}),r.details===""?"":t.jsx("p",{className:"text-red-500 mt-3",children:r.details}),t.jsx("textarea",{onChange:e=>c(e.target.value),value:l,className:"block w-full h-85 mt-3 px-5 py-3 resize-none bg-zinc-800 outline-none rounded-md",name:"details",placeholder:"Write your details"}),t.jsxs("button",{disabled:d,className:"bg-orange-500 text-md mt-3 p-2 rounded-md hover:bg-orange-400 hover:scale-110 transition-all duration-500 ease-in-out",children:[!d&&"Update Notes",d&&t.jsx(O,{color:"#fff",size:12})]})]}),t.jsx(T,{})]})};export{U as default};
